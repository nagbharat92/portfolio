@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

@theme inline {
  /* Font families */
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;

  /* Colors */
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
  --color-sidebar-background: hsl(var(--sidebar-background));
  --color-sidebar: hsl(var(--sidebar-background));
  --color-sidebar-foreground: hsl(var(--sidebar-foreground));
  --color-sidebar-primary: hsl(var(--sidebar-primary));
  --color-sidebar-primary-foreground: hsl(var(--sidebar-primary-foreground));
  --color-sidebar-accent: hsl(var(--sidebar-accent));
  --color-sidebar-accent-foreground: hsl(var(--sidebar-accent-foreground));
  --color-sidebar-border: hsl(var(--sidebar-border));
  --color-sidebar-ring: hsl(var(--sidebar-ring));
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground font-sans;
    background-image: radial-gradient(circle, hsl(var(--border)) 1.4px, transparent 1.4px);
    background-size: 24px 24px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  a {
    color: inherit;
    text-decoration: none;
  }
}

/* =============================================================================
   PRIMITIVE TOKENS
   The raw colour palette. Named by scale position, not by role.
   These are the only place raw HSL values should live.
   Never reference these directly in components — use semantic tokens instead.
   ============================================================================= */

:root {
  /* Neutral gray — pure achromatic scale */
  --gray-0:   0 0% 100%;
  --gray-50:  0 0% 98%;
  --gray-100: 0 0% 96.1%;
  --gray-200: 0 0% 95%;
  --gray-300: 0 0% 91%;
  --gray-400: 0 0% 89.8%;
  --gray-500: 0 0% 83.1%;
  --gray-600: 0 0% 63.9%;
  --gray-700: 0 0% 45.1%;
  --gray-800: 0 0% 20.9%;
  --gray-850: 0 0% 14.9%;
  --gray-900: 0 0% 9%;
  --gray-950: 0 0% 3.9%;

  /* Slate — blue-tinted gray, used for sidebar surfaces */
  --slate-100: 240 4.8% 95.9%;
  --slate-200: 240 4.8% 90%;
  --slate-300: 220 13% 91%;
  --slate-700: 240 5.3% 26.1%;
  --slate-800: 240 3.7% 22%;
  --slate-850: 240 3.7% 15.9%;
  --slate-900: 240 5.9% 10%;

  /* Red — used exclusively for destructive/error states */
  --red-500: 0 84.2% 60.2%;
  --red-800: 0 62.8% 30.6%;

  /* Blue — used exclusively for focus rings */
  --blue-400: 217.2 91.2% 59.8%;
}

/* =============================================================================
   TYPOGRAPHY TOKENS
   Font family, weight, and scale conventions.
   Sizes map to Tailwind's built-in text-* utilities.
   Weights map to Tailwind's built-in font-* utilities.
   These tokens are the reference point for all text decisions in the project.
   ============================================================================= */

:root {
  /* Font family
     Used via: font-sans (Tailwind utility, registered in @theme inline above)
     Direct CSS reference: var(--font-sans) — for non-Tailwind contexts only */
  --font-sans: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;

  /* Font weights
     Used via: font-normal, font-medium, font-semibold, font-bold (Tailwind utilities)
     Direct CSS reference: var(--font-weight-*) — for non-Tailwind contexts only */
  --font-weight-normal:   400;
  --font-weight-medium:   500;
  --font-weight-semibold: 600;
  --font-weight-bold:     700;

  /* Type scale — semantic intent reference
     These are NOT new CSS properties. They are documentation.
     The actual sizes come from Tailwind's built-in text-* utilities.

     text-xs   (12px) — Badges, tooltips, timestamps, keyboard shortcuts
     text-sm   (14px) — UI chrome: sidebar, buttons, inputs, labels, card descriptions
     text-base (16px) — Primary body copy, article paragraphs
     text-lg   (18px) — Lead paragraphs, intro text
     text-xl   (20px) — Card headings, widget titles, minor section labels
     text-2xl  (24px) — Subsection headings (h3)
     text-3xl  (30px) — Section headings (h2)
     text-4xl  (36px) — Page headings (h1)
     text-5xl  (48px) — Hero / display text

     Pairing guide:
     text-xs   → leading-none,    font-medium
     text-sm   → leading-snug,    font-normal
     text-base → leading-relaxed, font-normal
     text-lg   → leading-snug,    font-normal
     text-xl   → leading-snug,    font-semibold
     text-2xl  → leading-tight,   font-semibold  + tracking-tight
     text-3xl  → leading-tight,   font-semibold  + tracking-tight
     text-4xl  → leading-tight,   font-bold      + tracking-tight
     text-5xl  → leading-none,    font-bold      + tracking-tight
  */
}

/* =============================================================================
   MOTION TOKENS
   Duration and easing values for all animations in the project.
   CSS animations consume these directly via var().
   Framer Motion uses the mirrored values in src/lib/motion.ts.
   If you change a value here, update motion.ts to match, and vice versa.
   ============================================================================= */

:root {
  /* Duration
     fast:       150ms — micro-interactions (icon rotation, hover state)
     base:       200ms — standard transitions (expand/collapse, fades)
     slow:       300ms — larger movements (drawers, panels, modals)
     measured:   500ms — mid-length animations (typewriter)
     deliberate: 1000ms — prominent animations (theme cross-fade, hero reveals) */
  --duration-fast:       150ms;
  --duration-base:       200ms;
  --duration-slow:       300ms;
  --duration-measured:   500ms;
  --duration-deliberate: 1000ms;

  /* Page transition durations
     page-exit:  base  (200ms) — snappy fade-out of the outgoing page
     page-enter: slow  (300ms) — quick fade-in for the incoming page container
                         (content blocks handle their own staggered entrance) */
  --duration-page-exit:  var(--duration-base);
  --duration-page-enter: var(--duration-slow);

  /* Easing — explicit cubic-bezier values to ensure CSS/JS parity
     ease-out:    things arriving/decelerating — most common
     ease-in:     things leaving/accelerating away
     ease-in-out: symmetric transitions (expand/collapse)
     ease-spring: subtle overshoot for physical feel — use sparingly */
  --ease-out:    cubic-bezier(0, 0, 0.2, 1);
  --ease-in:     cubic-bezier(0.4, 0, 1, 1);
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* =============================================================================
   VIEW TRANSITIONS — soft theme cross-fade
   ============================================================================= */

::view-transition {
  pointer-events: none;
}

::view-transition-old(root),
::view-transition-new(root) {
  animation-duration: var(--duration-deliberate);
  animation-timing-function: var(--ease-in-out);
  animation-fill-mode: both;
  mix-blend-mode: normal;
}

::view-transition-old(root) {
  animation-name: theme-fade-out;
}

::view-transition-new(root) {
  animation-name: theme-fade-in;
}

@keyframes theme-fade-out {
  from { opacity: 1; }
  to   { opacity: 0; }
}

@keyframes theme-fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* =============================================================================
   SEMANTIC TOKENS — LIGHT THEME
   Maps design roles to primitive values.
   This is what components consume. Change a role here to retheme.
   ============================================================================= */

:root {
  /* Page background — the outermost surface behind all content */
  --background:            var(--gray-200);
  /* Default text and icon color — for content rendered on --background */
  --foreground:            var(--gray-950);

  /* Elevated container surface — cards, panels, inset content areas.
     Lighter than --background to create visual depth. */
  --card:                  var(--gray-0);
  --card-foreground:       var(--gray-950);

  /* Floating surface — dropdowns, popovers, command menus, tooltips.
     Semantically distinct from --card even when the value is identical.
     Kept separate so floating surfaces can diverge from cards independently. */
  --popover:               var(--gray-0);
  --popover-foreground:    var(--gray-950);

  /* Main action color — primary buttons, active/selected states, key UI elements */
  --primary:               var(--gray-900);
  --primary-foreground:    var(--gray-50);

  /* Secondary interactive surface — supporting buttons, tags, chips.
     For actions that assist a primary action, not compete with it. */
  --secondary:             var(--gray-100);
  --secondary-foreground:  var(--gray-900);

  /* De-emphasized surface and text.
     --muted: background for disabled areas, skeletons, inactive sections.
     --muted-foreground: hint text, placeholders, metadata, secondary descriptions.
     Distinction from --secondary: muted is for non-interactive content; secondary is for interactive elements. */
  --muted:                 var(--gray-100);
  --muted-foreground:      var(--gray-700);

  /* Hover and selection highlight — surface color when an interactive element is hovered or selected.
     NOT a decorative or brand color. Use only for interaction feedback states. */
  --accent:                var(--gray-300);
  --accent-foreground:     var(--gray-900);

  /* Error and irreversible action color — delete buttons, destructive confirmations, error messages.
     Never repurpose for warnings (warnings should be a separate token when needed). */
  --destructive:           var(--red-500);
  --destructive-foreground: var(--gray-50);

  /* Default border color — card edges, dividers, table lines */
  --border:                var(--gray-400);
  /* Input field border — currently identical to --border.
     Kept separate so input borders can be styled independently of general borders. */
  --input:                 var(--gray-400);
  /* Keyboard focus ring — appears on focused interactive elements only.
     Never use as a decorative border or divider. */
  --ring:                  var(--gray-950);

  --radius: 1.5rem;

  /* Sidebar surface tokens — use the slate family for a subtly cooler sidebar tone.
     These intentionally diverge from the main --background/--foreground to create
     a visual separation between the navigation chrome and the content area. */
  --sidebar-background:           var(--gray-50);
  --sidebar-foreground:           var(--slate-700);
  --sidebar-primary:              var(--slate-900);
  --sidebar-primary-foreground:   var(--gray-50);
  --sidebar-accent:               var(--slate-200);
  --sidebar-accent-foreground:    var(--slate-900);
  --sidebar-border:               var(--slate-300);
  --sidebar-ring:                 var(--blue-400);
}

/* =============================================================================
   SEMANTIC TOKENS — DARK THEME
   Same roles as the light theme. Only the primitive mappings change.
   Token intent and usage rules are identical — see the light theme comments above.
   ============================================================================= */

.dark {
  --background:            var(--gray-950);
  --foreground:            var(--gray-50);

  --card:                  var(--gray-950);
  --card-foreground:       var(--gray-50);

  --popover:               var(--gray-950);
  --popover-foreground:    var(--gray-50);

  --primary:               var(--gray-50);
  --primary-foreground:    var(--gray-900);

  --secondary:             var(--gray-850);
  --secondary-foreground:  var(--gray-50);

  --muted:                 var(--gray-850);
  --muted-foreground:      var(--gray-600);

  --accent:                var(--gray-800);
  --accent-foreground:     var(--gray-50);

  --destructive:           var(--red-800);
  --destructive-foreground: var(--gray-50);

  --border:                var(--gray-850);
  --input:                 var(--gray-850);
  --ring:                  var(--gray-500);

  /* Sidebar */
  --sidebar-background:           var(--slate-900);
  --sidebar-foreground:           var(--slate-100);
  --sidebar-primary:              var(--gray-50);
  --sidebar-primary-foreground:   var(--slate-900);
  --sidebar-accent:               var(--slate-800);
  --sidebar-accent-foreground:    var(--slate-100);
  --sidebar-border:               var(--slate-850);
  --sidebar-ring:                 var(--blue-400);
}

/* Typewriter copy-email animation */
button:not([data-animating]):hover .typewriter-text {
  text-decoration: underline;
  text-underline-offset: 4px;
}

.typewriter-text {
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  border-right: 2px solid currentColor;
  max-width: 0;
  vertical-align: bottom;
  text-align: left;
}

.typewriter-text.typing-in {
  animation: typeIn var(--duration-measured) var(--ease-in) forwards,
             blinkCaret var(--duration-measured) step-end 2;
}

.typewriter-text.typing-out {
  animation: typeOut var(--duration-measured) var(--ease-out) forwards;
}

.typewriter-text.idle {
  max-width: none;
  border-right-color: transparent;
}

@keyframes typeIn {
  from { max-width: 0; }
  to   { max-width: 10em; }
}

@keyframes typeOut {
  from { max-width: 10em; }
  to   { max-width: 0; }
}

@keyframes blinkCaret {
  50% { border-color: transparent; }
}

/* =============================================================================
   CONTENT ENTRANCE ANIMATIONS
   Fade-in-up for content elements, flat fade for containers.
   Stagger via two tokens: --stagger-base and --stagger-growth.
   Each element sets --i (its index) and the delay is computed via calc().

   delay(i) = i * base + i*(i-1)/2 * growth
   This produces a decelerating schedule automatically.

   Tuning:
     Tighter wave   → lower --stagger-base  (try 60ms)
     More decel     → raise --stagger-growth (try 20ms)
     Uniform gaps   → set --stagger-growth: 0ms
     Easing: expo-out — fast arrival, long soft tail.
   ============================================================================= */

:root {
  --stagger-base:   100ms;
  --stagger-growth:  10ms;
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(200px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.animate-fade-in-up {
  --i: 0;
  animation: fade-in-up 1.4s cubic-bezier(0.16, 1, 0.3, 1) both;
  animation-delay: calc(var(--i) * var(--stagger-base) + var(--i) * (var(--i) - 1) / 2 * var(--stagger-growth));
}

.animate-fade-in {
  --i: 0;
  animation: fade-in 1.4s cubic-bezier(0.16, 1, 0.3, 1) both;
  animation-delay: calc(var(--i) * var(--stagger-base) + var(--i) * (var(--i) - 1) / 2 * var(--stagger-growth));
}

/* App layout */
#root {
  height: 100vh;
  overflow: hidden;
  display: flex;
  padding: 1.5rem;
}

@media (min-width: 768px) {
  #root {
    padding: 2.5rem;
  }
}
